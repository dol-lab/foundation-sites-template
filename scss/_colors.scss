///
/// Color roles used to simplify handling
///

@use "sass:color";
@use "sass:map";

/// Background
/// stacking - $color-bg-0 (page background), $color-bg-1 (card and widget background), $color-bg-2 (highlighted element background)
$color-bg-0: var(--f-color-bg-0);
$color-bg-1: var(--f-color-bg-1);
$color-bg-2: var(--f-color-bg-2 );

/// Borders
/// $color-border-0 (minimal, just about visible), $color-border-1 (increased in visibility)
$color-border-0: var(--f-color-border-0);
$color-border-1: var(--f-color-border-1);
$color-border-2: var(--f-color-border-2);

/// Text
/// decreasing in dominance: $color-text-0 (headlines, links), $color-text-1 (p, card content), $color-text-2 (small)
$color-text-0: var(--f-color-text-0);
$color-text-1: var(--f-color-text-1);
$color-text-2: var(--f-color-text-2);


/// Palette colors
/// Each palette color is assigned a base value (no suffix), alongside a darker version (e.g. used for hover states, -darker), as well as a text color provides contrast to them (-contrast)
$foundation-palette: (
	brand: hsl(16deg 99% 43%),
	primary: hsl(200deg 20% 50%),
	secondary: hsl(199deg 18% 33%),
	success: hsl(152deg 62% 41%),
	warning: hsl(41deg 100% 50%),
	alert: hsl(358deg 86% 61%)
);
$foundation-palette-contrast: (
	brand: hsl(0deg 0% 100%),
	primary: hsl(0deg 0% 100%),
	secondary: hsl(0deg 0% 100%),
	success: hsl(0deg 0% 100%),
	warning: hsl(0deg 0% 0%),
	alert: hsl(0deg 0% 100%)
);
$foundation-palette-darktheme: (
	brand: map.get($foundation-palette, "brand"),
	primary: map.get($foundation-palette, "primary"),
	secondary: map.get($foundation-palette, "secondary"),
	success: map.get($foundation-palette, "success"),
	warning: map.get($foundation-palette, "warning"),
	alert: map.get($foundation-palette, "alert")
);
$foundation-palette-darktheme-contrast: (
	brand: map.get($foundation-palette-contrast, "brand"),
	primary: map.get($foundation-palette-contrast, "primary"),
	secondary: map.get($foundation-palette-contrast, "secondary"),
	success: map.get($foundation-palette-contrast, "success"),
	warning: map.get($foundation-palette-contrast, "warning"),
	alert: map.get($foundation-palette-contrast, "alert")
);

/// Palette for neutral tones (light-theme, dark-theme)
$neutral-palette: (
	100: ( // --f-color-neutral-100
		hsl(0deg 0% 100%),
		hsl(0deg 0% 4%)),
	200: ( // --f-color-neutral-200
		hsl(0deg 0% 97%),
		hsl(0deg 0% 9%)),
	300: ( // --f-color-neutral-300
		hsl(0deg 0% 94%),
		hsl(0deg 0% 14%)),
	400: ( // --f-color-neutral-400
		hsl(0deg 0% 73%),
		hsl(0deg 0% 42%)),
	500: ( // --f-color-neutral-500
		hsl(0deg 0% 52%),
		hsl(0deg 0% 55%)),
	600: ( // --f-color-neutral-600 -> --f-color-text-1
		hsl(0deg 0% 27%),
		hsl(0deg 0% 68%)),
	700: ( // --f-color-neutral-700
		hsl(0deg 0% 20%),
		hsl(0deg 0% 96%))
);

/* ==========================================================================
   Theming
   ========================================================================== */

:root {
	// Text colors are always derived from the same neutral steps.
	--f-color-text-0: var(--f-color-neutral-700);
	--f-color-text-1: var(--f-color-neutral-600);
	--f-color-text-2: var(--f-color-neutral-500);

	// The 'darker' variant calculation is the same for all themes.
	// It loops through the base palette to generate a rule for each color name.
	@each $color-name, $color in $foundation-palette {
		--f-color-#{$color-name}-darker: var(--f-color-#{$color-name});
		--f-color-#{$color-name}-darker: color-mix(in oklab, var(--f-color-#{$color-name}) 88%, black 12%);
	}

	// Borders
	@include color-mix(--f-color-border-0, #{$color-text-0}, 6%, transparent, 94%);
	@include color-mix(--f-color-border-1, #{$color-text-0}, 12%, transparent, 88%);
	@include color-mix(--f-color-border-2, #{$color-text-0}, 16%, transparent, 84%);

	// Default: apply light theme tokens.
	@include     foundation-apply-theme( 'light' );

	/// Dark Mode
	@media (prefers-color-scheme: dark) {
		&:not([data-theme="light"]) {
			// Override with dark theme tokens when user prefers dark mode and no explicit light mode is set.
			@include foundation-apply-theme('dark');
		}
	}
}
